## 色変換
シミュレーション値の色変換プログラム

2次元NS-FDTDにより遠方界変換まで行われた値（散乱強度）を角度に対する色情報として出力

## 手法
色変換は可視光線の波長ごとの各反射率から、RGB値を求める変換である。色変換を行うには、反射率をXYZ系へ写像し、それからRGB値に変換するという方法を用いる。XYZ等色関数とは、CIEが提唱した波長スペクトルとXYZ刺激値との対応関数である。実際に3刺激値XYZ値は以下の式で求める。
X=k∫▒〖S(λ) x ̂(λ)R(λ)dλ〗
Y= k∫▒〖S(λ) y ̂(λ)R(λ)dλ〗
Z= k∫▒〖S(λ) z ̂(λ)R(λ)dλ〗
k=100/∫▒〖S(λ) y ̂(λ)dλ〗
ここで、λは波長を表し、x ̂(λ),y ̂(λ),z ̂(λ)はλに対するx,y,z等色関数の値を、S(λ), R(λ)は標準の光の分布と反射率を表す。kはYの値が測光量に一致するように定めるための比例定数である。ここで、光の分光分布とは、JIS Z8720で規定された太陽光に分布を表すStandard Illuminant 65(D65)を用いる。
　また、XYZ刺激値からRGB値への変換は以下の式で与えられる。
[■(R@G@B)]=[■(2.3655&-0.8971&-0.4683@-0.5151&1.4264&0.0887@0.0052&-0.0144&1.0089)][■(X@Y@Z)] 



## シミュレーションの変換結果
編集中・・
